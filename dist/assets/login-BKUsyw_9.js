import{_ as S,u as j,r as N,a as f,c as U,o as z,b as O,d,e as k,f as n,n as M,g as e,h as l,w as r,F as B,i as L,j as g,k as T,t as A,E as D,l as K,m as Q,p as I,q as x,s as $,v as X,x as Z,y as q,z as G,A as R,B as H}from"./index-CH61suAI.js";/* empty css                 */const W=u=>(X("data-v-0eeb9c11"),u=u(),Z(),u),Y={class:"common-layout"},P={class:"content"},ee={class:"login"},oe={class:"login-type"},se={class:"operation-line"},te=W(()=>n("span",{class:"forget-pw"},"忘记密码?",-1)),ae=["loading"],le={__name:"login",setup(u){const V=j(),w=q(),o=N({ruleForm:{username:"",password:"",message:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},loading:!1}),y=f(null),i=f("1"),m=f(!1),F=t=>{i.value=t},b=U(()=>o.loading?"登录中":"登录"),v=()=>{o.loading=!0,y.value.validate(async t=>{t?setTimeout(()=>{o.ruleForm.password,o.ruleForm.username,localStorage.setItem("menuList",JSON.stringify(w.options.routes)),h({success:!0,message:"登录成功",code:200,data:{access_token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX25hbWUiOiJobHUiLCJpcCI6IjE5Mi4xNjguOC4xMjUiLCJpc3MiOiJQSVNYIiwiZXhwIjoxNzE3NDgzMjIwLCJpYXQiOjE3MTc0ODE0MjAsInRpbWVzdGFtcCI6MjI5fQ.Svvl7HZZ9zn1_2BKs_D4Q5GxA7ElOdjSaIfrxfjh4Zs",expires_in:"1800",userInfo:{id:"826496633432113152",username:"hlu",language:"zh_CN"}}}.data),window.$message.success({message:"登录成功",duration:1e3}),w.push({name:"homePage"})},100):o.loading=!1})},c=t=>{t.keyCode==13&&!o.loading&&v()};z(()=>{window.addEventListener("keydown",c)}),O(()=>{window.removeEventListener("keydown",c,!1)});const h=t=>{window.$Cookies.set("Admin-Token",t.access_token),localStorage.setItem("authorToken",t.access_token),V.login(t.userInfo)};return(t,s)=>{const p=G,_=R,C=H,E=D,J=K;return d(),k("div",Y,[n("div",P,[n("div",ee,[n("div",oe,[n("span",{onClick:s[0]||(s[0]=a=>F("1")),class:M(e(i)==="1"?"active-type":"")},"账号密码登录",2)]),l(E,{ref_key:"loginForm",ref:y,model:e(o).ruleForm,rules:e(o).rules,"label-width":"0px",class:"demo-ruleForm",size:"default"},{default:r(()=>[l(_,{prop:"username"},{default:r(()=>[l(p,{"prefix-icon":e(Q),placeholder:"请输入登录账号",modelValue:e(o).ruleForm.username,"onUpdate:modelValue":s[1]||(s[1]=a=>e(o).ruleForm.username=a)},null,8,["prefix-icon","modelValue"])]),_:1}),e(i)==="1"?(d(),I(_,{key:0,prop:"password"},{default:r(()=>[l(p,{"prefix-icon":e(x),placeholder:"请输入密码",modelValue:e(o).ruleForm.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).ruleForm.password=a),type:"password"},null,8,["prefix-icon","modelValue"])]),_:1})):g("",!0),e(i)==="2"?(d(),I(_,{key:1,prop:"password"},{default:r(()=>[l(p,{"prefix-icon":e(x),placeholder:"请输入验证码",modelValue:e(o).ruleForm.message,"onUpdate:modelValue":s[3]||(s[3]=a=>e(o).ruleForm.message=a),type:"password"},{append:r(()=>[l(C,{style:{color:"#2878ff"}},{default:r(()=>[$("获取验证码")]),_:1})]),_:1},8,["prefix-icon","modelValue"])]),_:1})):g("",!0)]),_:1},8,["model","rules"]),n("div",se,[e(i)==="1"?(d(),k(B,{key:0},[l(J,{modelValue:e(m),"onUpdate:modelValue":s[4]||(s[4]=a=>L(m)?m.value=a:null),label:"自动登录",size:"large"},null,8,["modelValue"]),te],64)):g("",!0)]),n("div",{class:"login-btn",loading:e(o).loading,type:"primary",style:{width:"100%"},onClick:s[5]||(s[5]=a=>v(t.ruleForm)),onKeydown:s[6]||(s[6]=T(a=>c(),["enter"]))},A(e(b)),41,ae)])])])}}},ie=S(le,[["__scopeId","data-v-0eeb9c11"]]);export{ie as default};
